(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02a722d0"],{"1fc0":function(t,e,n){t.exports=n.p+"img/blue-loader.249140da.904b44c2.svg"},"3d59":function(t,e,n){"use strict";n("77a9")},"408a":function(t,e,n){var a=n("e330");t.exports=a(1..valueOf)},5530:function(t,e,n){t.exports=n.p+"img/tx-up.627f124a.svg"},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("e330"),o=n("1d80"),i=n("577e"),s=n("5899"),r=a("".replace),c="["+s+"]",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),m=function(t){return function(e){var n=i(o(e));return 1&t&&(n=r(n,l,"")),2&t&&(n=r(n,u,"")),n}};t.exports={start:m(1),end:m(2),trim:m(3)}},7156:function(t,e,n){var a=n("1626"),o=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var s,r;return i&&a(s=e.constructor)&&s!==n&&o(r=s.prototype)&&r!==n.prototype&&i(t,r),t}},"77a9":function(t,e,n){},a9e3:function(t,e,n){"use strict";var a=n("83ab"),o=n("da84"),i=n("e330"),s=n("94ca"),r=n("6eeb"),c=n("1a2d"),l=n("7156"),u=n("3a9b"),m=n("d9b5"),d=n("c04e"),f=n("d039"),h=n("241c").f,p=n("06cf").f,g=n("9bf2").f,v=n("408a"),x=n("58a8").trim,b="Number",_=o[b],y=_.prototype,k=o.TypeError,C=i("".slice),w=i("".charCodeAt),$=function(t){var e=d(t,"number");return"bigint"==typeof e?e:T(e)},T=function(t){var e,n,a,o,i,s,r,c,l=d(t,"number");if(m(l))throw k("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=x(l),e=w(l,0),43===e||45===e){if(n=w(l,2),88===n||120===n)return NaN}else if(48===e){switch(w(l,1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+l}for(i=C(l,2),s=i.length,r=0;r<s;r++)if(c=w(i,r),c<48||c>o)return NaN;return parseInt(i,a)}return+l};if(s(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var S,F=function(t){var e=arguments.length<1?0:_($(t)),n=this;return u(y,n)&&f((function(){v(n)}))?l(Object(e),n,F):e},I=a?h(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;I.length>A;A++)c(_,S=I[A])&&!c(F,S)&&g(F,S,p(_,S));F.prototype=y,y.constructor=F,r(o,b,F)}},b9d1:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.showBackground?"sec_card":""},[n("div",{staticClass:"sec_card_container sec_card_header"},[t._t("header")],2),n("div",{staticClass:"sec_card_container"},[t._t("default")],2)])},o=[],i=n("dee4"),s={mixins:[i["a"]],name:"SecCard",props:{showBackground:{type:Boolean,default:!1}},data:function(){return{}}},r=s,c=n("2877"),l=Object(c["a"])(r,a,o,!1,null,null,null);e["a"]=l.exports},bc43:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"sec_amount_input",style:t.style,attrs:{type:"text",placeholder:0===t.decimals?"0":"0.0",controls:"false"},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},t.onInput],focus:t.onFocus}}),t.symbol?n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.symbol))]):t._e()])},o=[],i=(n("a9e3"),n("d3b7"),n("25f0"),n("dee4")),s=n("cf45"),r={mixins:[i["a"]],name:"AmountInput",model:{prop:"value",event:"change"},props:{value:{type:[Number,String]},symbol:String,decimals:{type:Number,default:79},lineHeight:{type:Number,default:30}},data:function(){return{amount:"",lastAmount:""}},computed:{style:function(){return{"line-height":this.lineHeight+"px","min-width":"%"===this.symbol?"0":"220px","text-align":"%"===this.symbol?"center":"left"}}},created:function(){this.amount=this.value,this.lastAmount=this.value},watch:{value:function(t){this.amount=t,this.lastAmount=t}},methods:{onFocus:function(){},onInput:function(t){var e=t.target.value;""===e||this.checkValue(e)?this.lastAmount=e:this.amount=this.lastAmount,this.$emit("change",this.amount)},checkValue:function(t){if(0===this.decimals)return"string"===typeof t?parseInt(t,10).toString()===t:parseInt(t,10)===t;try{return s["a"].unitToWeiWithDecimals(t,this.decimals),!0}catch(e){return!1}}}},c=r,l=n("2877"),u=Object(l["a"])(c,a,o,!1,null,null,null);e["a"]=u.exports},c448:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("sec-card",{staticStyle:{height:"100%"}},["init"===t.status?a("div",{staticClass:"tx-info-form-panel tx-confirm-panel"},[a("div",{staticClass:"tx-confirm-content"},[t._t("content"),a("div",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center",display:"flex"}},[""===t.cancelText?a("el-button",{staticClass:"submit-btn",attrs:{size:t.isMobile?"mini":"large",type:"primary",round:""},on:{click:t.goConfirm}},[t._v(" "+t._s(t.$t("common.confirm"))+" ")]):[a("div",{staticStyle:{width:"50%"}},[a("el-button",{attrs:{size:t.isMobile?"mini":"large",type:"primary",round:""},on:{click:t.goConfirm}},[t._v(" "+t._s(t.$t("common.confirm"))+" ")])],1),a("div",{staticStyle:{width:"50%","margin-left":"10px"}},[a("el-button",{attrs:{size:t.isMobile?"mini":"large",type:"info",round:""},on:{click:t.goCancel}},[t._v(t._s(t.cancelText))])],1)]],2)],2)]):"pending"===t.status?a("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[a("img",{staticClass:"tx-tip-img loading-img",attrs:{src:n("1fc0"),alt:"loader"}}),a("h2",[t._v(t._s(t.$t("common.waitingTxConfirm")))]),a("span",[t._v(t._s(t.$t("common.confirmLabel")))])]):a("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[a("img",{staticClass:"tx-tip-img",attrs:{src:n("5530"),alt:"loader"}}),a("h2",[t._v(t._s(t.$t("common.txSentLabel")))]),a("a",{staticClass:"link-a",attrs:{href:t.getExplorerUrl("tx",t.hash),target:"_blank"}},[t._v(t._s(t.$t("common.openEtherscan")))]),t.showAddToken?a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:t.isMobile?"mini":"large",loading:t.addTokenLoading,type:"primary"},on:{click:t.goAddToken}},[t._v(" "+t._s(t.$t("common.add"))+" "+t._s(t.addToken.symbol)+" "+t._s(t.$t("common.toMetamask"))+" ")]):t._e()],1)])},o=[],i=n("b9d1"),s=n("e31c"),r=n("cf45"),c=n("b4d8"),l=n("dee4"),u=n("4a3f"),m={mixins:[l["a"]],name:"TxConfirm",model:{prop:"hash",event:"change"},props:{txForm:{type:Object},callFunc:{type:Function},hash:{type:String},addToken:{type:Object},cancelText:{type:String,default:""},cancelFunc:{type:Function}},components:{SecCard:i["a"]},computed:{showAddToken:function(){return null!==this.addToken&&void 0!==this.addToken}},data:function(){return{status:"init",value:"",addTokenLoading:!1}},watch:{},created:function(){this.init()},methods:{init:function(){this.status="init",this.value=this.hash},goConfirm:function(){var t=this;this.status="pending",this.callFunc().then((function(e){t.value=e.hash,t.$emit("change",t.value);var n={};r["a"].objCopy(t.txForm,n),n.hash=e.hash,n.sender=t.account,n.createTime=(new Date).getTime(),s["a"].addTransaction(n),t.status="success",t.$eventBus.$emit(c["a"].txSent,t.value),t.$message.success(t.$t("message.txSendSuccess"))})).catch((function(e){4001===e.code?t.$message.error(t.$t("common.txRejected")):t.$notify.error({title:t.$t("common.sendError"),message:e,offset:100,duration:5e3}),t.status="init"}))},goAddToken:function(){u["a"].watchAsset(this.addToken),this.addTokenLoading=!0},goCancel:function(){this.cancelFunc&&this.cancelFunc()}}},d=m,f=n("2877"),h=Object(f["a"])(d,a,o,!1,null,null,null);e["a"]=h.exports},cab9:function(t,e,n){"use strict";var a=n("b4d8");e["a"]={created:function(){var t=this;this.eventHandlers[a["a"].txConfirmed]=function(e){t.hash===e.hash&&(t.txPending=!1)},this.eventHandlers[a["a"].txSent]=function(e){t.hash===e&&(t.txPending=!0)}},beforeDestroy:function(){},data:function(){return{eventHandlers:{},hash:"",txType:"",txPending:!1,txForm:{},txConfirmCall:null,addToken:null}},computed:{txLoading:function(){return this.$store.state.loading||this.txPending},initLoading:function(){return this.$store.state.loading}},methods:{}}},f2bf:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sec-card",{staticStyle:{width:"100%","max-width":"560px",height:"100%"},attrs:{"show-background":!0}},[n("div",{staticClass:"sec-card-header",attrs:{slot:"header"},slot:"header"},[n("div",[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-donate"}})]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.$t("donate.header.title")))])])]),n("div",[n("div",[n("span",{staticClass:"tip-span"},[t._v(t._s(t.$t("donate.form.donateAmount"))+": ")]),n("span",{staticClass:"tip-span"},[t._v(t._s(t.donateAmount)+" "+t._s(t.tokenSymbol))])]),n("div",{staticClass:"sec_form_panel"},[n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(" "+t._s(t.$t("donate.form.amount"))+": ")])]),n("div",{staticClass:"sec_form_item_content"},[n("span",{staticClass:"tip-span"},[t._v(" "+t._s(t.$t("donate.form.balance"))+": "+t._s(t.tokenBalanceInUnit)+" "+t._s(t.tokenSymbol)+" "),n("a",{staticClass:"link-a",on:{click:t.goMax}},[t._v("("+t._s(t.$t("common.max"))+")")])]),n("amount-input",{staticStyle:{"min-width":"300px","margin-top":"5px"},attrs:{symbol:t.tokenSymbol,decimals:t.tokenDecimals},model:{value:t.tradeForm.amount,callback:function(e){t.$set(t.tradeForm,"amount",e)},expression:"tradeForm.amount"}})],1)])]),n("div",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"}},[n("tx-commit-button",{attrs:{"tx-loading":t.txLoading,"tx-form-check":t.txFormCheck}})],1)]),n("el-dialog",{attrs:{visible:t.txConfirmDialogVisible,"custom-class":"wallet-dialog",title:t.$t("common.txConfirmDialogTitle"),width:"90%"},on:{"update:visible":function(e){t.txConfirmDialogVisible=e}}},[n("tx-confirm",{ref:"txConfirm",attrs:{"tx-form":t.txForm,"call-func":t.txConfirmCall},model:{value:t.hash,callback:function(e){t.hash=e},expression:"hash"}},[n("div",{staticStyle:{width:"100%"},attrs:{slot:"content"},slot:"content"},[t.needApprove?n("div",{staticStyle:{width:"100%","text-align":"center"}},[t._v(" "+t._s(t.$t("common.approve"))+" "+t._s(t.tokenSymbol)+" ")]):n("div",{staticClass:"sec_form_panel"},[n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(t._s(t.$t("orderNew.form.amount"))+":")])]),n("div",{staticClass:"sec_form_item_content"},[t._v(" "+t._s(t.tradeForm.amount)+" "+t._s(t.tokenSymbol)+" ")])])])]),n("span",{staticStyle:{"font-size":"20px"},attrs:{slot:"info"},slot:"info"},[t._v(" "+t._s(t.needApprove?t.$t("common.approve")+t.tokenSymbol:t.formatTradeInfo)+" ")])])],1)],1)},o=[],i=n("1da1"),s=(n("96cf"),n("d3b7"),n("25f0"),n("99af"),n("f5e2")),r=n("bc43"),c=n("c448"),l=n("b9d1"),u=n("dee4"),m=n("cab9"),d=n("cf45"),f=n("2610"),h=n("4360"),p={donateBalanceOf:function(t,e){if(null!==h["a"].state.donate.contract)return h["a"].state.donate.contract.donateBalanceOf(t,e)},donate:function(t,e){if(null!==h["a"].state.donate.contract)return h["a"].state.donate.contract.connect(h["a"].state.provider.getSigner()).donate(t,e)},totalDonateBalance:function(t){if(null!==h["a"].state.donate.contract)return h["a"].state.donate.contract.totalDonateBalance(t)},withdraw:function(t){if(null!==h["a"].state.donate.contract)return h["a"].state.donate.contract.connect(h["a"].state.provider.getSigner()).withdraw(t)}},g=n("b4d8"),v={mixins:[u["a"],m["a"]],name:"donate",props:{},components:{SecCard:l["a"],TxConfirm:c["a"],AmountInput:r["a"],TxCommitButton:s["default"]},computed:{amountInWei:function(){var t=d["a"].unitToWei(this.tradeForm.amount.toString());return t},sellBtnTitle:function(){return this.initLoading?this.$t("common.loading"):""===this.account?this.$t("header.connectWallet"):this.amountInWei<=0?this.$t("donate.btn.inputAmount"):this.needApprove?this.$t("common.approve"):this.$t("donate.btn.donate")},needApprove:function(){return""!==this.tradeForm.amount&&(!(this.amountInWei<=0)&&(0===this.allowance||!!this.allowance.lt(this.amountInWei)))},formatTradeInfo:function(){return"".concat(this.$t("donate.header.title")," ").concat(this.tradeForm.amount," ").concat(this.tokenSymbol)}},data:function(){return{allowance:0,donateAmount:0,tradeForm:{amount:""},txConfirmDialogVisible:!1}},watch:{},created:function(){var t=this;this.eventHandlers[g["a"].txConfirmed]=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.type!==d["a"].getTxTypes().donate){e.next=3;break}return e.next=3,t.getDonateAmount();case 3:if(n.type!==d["a"].getTxTypes().approve||t.hash!==n.hash){e.next=6;break}return e.next=6,t.getAllowance();case 6:t.hash===n.hash&&(t.txPending=!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.eventHandlers[g["a"].txSent]=function(e){t.hash===e&&t.txForm.type===d["a"].getTxTypes().donate&&(t.tradeForm.amount="")},this.initData()},methods:{baseInit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getDonateAmount();case 2:return e.next=4,t.getAllowance();case 4:case"end":return e.stop()}}),e)})))()},initData:function(){},getDonateAmount:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.donateBalanceOf(t.tokenAddress,t.account);case 2:n=e.sent,t.donateAmount=d["a"].weiToUnit(n,t.tokenDecimals);case 4:case"end":return e.stop()}}),e)})))()},getAllowance:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].allowance(t.account,t.donateItem.contract.address);case 2:t.allowance=e.sent;case 3:case"end":return e.stop()}}),e)})))()},goMax:function(){this.tradeForm.amount=this.tokenBalanceInUnit},txFormCheck:function(){var t={success:!1};return this.amountInWei<=0?(t.msg=this.$t("donate.btn.inputAmount"),t):this.amountInWei.gt(this.tokenBalance)?(t.msg=this.$t("common.balanceNotEnough"),t):this.needApprove?(t.msg=this.$t("common.approve"),t.success=!0,t.func=this.goDonate,t):(t.msg=this.$t("donate.btn.donate"),t.success=!0,t.func=this.goDonate,t)},goDonate:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.tradeForm.amount>t.tokenBalanceInUnit)){e.next=3;break}return t.$message.warning(t.$t("common.balanceNotEnough")),e.abrupt("return");case 3:t.$refs["txConfirm"]&&t.$refs["txConfirm"].init(),t.needApprove?(t.txForm={type:d["a"].getTxTypes().approve,token:t.tokenItem.address,to:t.donateItem.contract.address,sender:t.account},t.txConfirmCall=function(){return f["a"].approve(t.txForm.to,-1)}):(t.txForm={type:d["a"].getTxTypes().donate,token:t.tokenItem.address,from:t.account,to:t.donateItem.contract.address,amount:d["a"].unitToWei(t.tradeForm.amount,t.tokenItem.decimals)},t.txConfirmCall=function(){return p.donate(t.txForm.token,t.txForm.amount)}),t.txConfirmDialogVisible=!0;case 6:case"end":return e.stop()}}),e)})))()}}},x=v,b=n("2877"),_=Object(b["a"])(x,a,o,!1,null,null,null);e["default"]=_.exports},f5e2:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{staticClass:"submit-btn",attrs:{loading:t.txLoading,type:t.sellBtnType,size:t.isMobile?"mini":"large",disabled:"primary"!==t.sellBtnType,round:""},on:{click:t.onCommit}},[t._v(t._s(t.sellBtnTitle))]),n("el-dialog",{attrs:{visible:t.installWalletDialogVisible,"custom-class":"wallet-dialog","append-to-body":"",width:"90%"},on:{"update:visible":function(e){t.installWalletDialogVisible=e}}},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[n("div",{staticClass:"wallet-tip",domProps:{innerHTML:t._s(t.$t("common.installWalletTip"))}}),n("el-button",{attrs:{size:t.isMobile?"mini":"large",type:"primary"},on:{click:t.goInstallWallet}},[t._v(t._s(t.$t("common.installWallet")))])],1)])],1)},o=[],i=n("1da1"),s=(n("96cf"),n("dee4")),r=n("cf45"),c={mixins:[s["a"]],name:"TxCommitButton",props:{isAccount:{type:Boolean,default:!1},txLoading:Boolean,txFormCheck:Function,size:{type:String,default:"small"}},data:function(){return{installWalletDialogVisible:!1}},computed:{sellBtnType:function(){return""===this.account?"primary":this.isAccount||null!==this.poolItem?this.txFormCheck&&!this.txFormCheck().success?"info":"primary":"info"},sellBtnTitle:function(){if(""===this.account)return this.$t("header.connectWallet");if(this.txLoading)return this.$t("common.loading");if(!this.isAccount&&null===this.poolItem)return this.$t("common.noPool");if(this.txFormCheck){var t=this.txFormCheck();return void 0===t.msg||null===t.msg||""===t.msg?this.$t("common.submit"):t.msg}return this.$t("common.submit")}},watch:{},methods:{onCommit:function(){if(""===this.account)return this.onConnectWallet();if((this.isAccount||null!==this.poolItem)&&this.txFormCheck){var t=this.txFormCheck();t.success&&t.func&&t.func()}},onConnectWallet:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].getAccount(t.$message,(function(){t.installWalletDialogVisible=!0}));case 2:case"end":return e.stop()}}),e)})))()}}},l=c,u=(n("3d59"),n("2877")),m=Object(u["a"])(l,a,o,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-02a722d0.536f5d20.js.map