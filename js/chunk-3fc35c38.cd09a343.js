(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fc35c38"],{"04ad":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rank-info"},[n("el-descriptions",{attrs:{column:t.isMobile?1:2,size:"mini"}},[t.isRank?n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"},attrs:{slot:"title"},slot:"title"},[n("span",{staticStyle:{"font-size":"20px",color:"#fff","line-height":"15px"}},[t._v("NO."+t._s(t.rank.index)+" ")]),n("a",{staticClass:"link-a",staticStyle:{"margin-left":"10px"},attrs:{href:t.getExplorerUrl("address",t.rank.account),target:"_blank"}},[t._v(" "+t._s(t.isMobile?t.formatAddress(t.rank.account):t.rank.account)+" ")]),n("i",{staticClass:"el-icon-document-copy btn-icon",staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.copyText(t.rank.account)}}}),n("span",{staticStyle:{"margin-left":"5px",color:"#fff"}},[t._v(" "+t._s(t.successPercent)+"% ")])]):t._e(),n("el-descriptions-item",{attrs:{label:t.$t("rank.form.title")}},[t._v(" "+t._s(t.rank.title)+" "),n("i",{staticClass:"el-icon-document-copy btn-icon",staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.copyText(t.rank.title)}}})]),n("el-descriptions-item",{attrs:{label:t.$t("rank.form.content")}},[t._v(" "+t._s(t.rank.content)+" "),n("i",{staticClass:"el-icon-document-copy btn-icon",staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.copyText(t.rank.content)}}})]),n("el-descriptions-item",{attrs:{label:t.$t("rank.form.successCnt")}},[t.rank.successCnt>0?n("span",{staticStyle:{color:"green"}},[t._v(t._s(t.rank.successCnt))]):n("span",[t._v(t._s(t.rank.successCnt))])]),n("el-descriptions-item",{attrs:{label:t.$t("rank.form.successBalance")}},[t.successBalanceInUnit>0?n("span",{staticStyle:{color:"green"}},[t._v(t._s(t.successBalanceInUnit)+" "+t._s(t.tokenSymbol))]):n("span",[t._v(t._s(t.successBalanceInUnit)+" "+t._s(t.tokenSymbol))])]),n("el-descriptions-item",{attrs:{label:t.$t("rank.form.failedCnt")}},[t.rank.failedCnt>0?n("span",{staticStyle:{color:"yellow"}},[t._v(t._s(t.rank.failedCnt))]):n("span",[t._v(t._s(t.rank.failedCnt))])]),n("el-descriptions-item",{attrs:{label:t.$t("rank.form.failedBalance")}},[t.failedBalanceInUnit>0?n("span",{staticStyle:{color:"yellow"}},[t._v(t._s(t.failedBalanceInUnit)+" "+t._s(t.tokenSymbol))]):n("span",[t._v(t._s(t.failedBalanceInUnit)+" "+t._s(t.tokenSymbol))])]),n("el-descriptions-item",{attrs:{label:t.$t("rank.form.arguingCnt")}},[t.rank.arguingCnt>0?n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.rank.arguingCnt))]):n("span",[t._v(t._s(t.rank.arguingCnt))])]),n("el-descriptions-item",{attrs:{label:t.$t("rank.form.arguingBalance")}},[t.arguingBalanceInUnit>0?n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.arguingBalanceInUnit)+" "+t._s(t.tokenSymbol))]):n("span",[t._v(t._s(t.arguingBalanceInUnit)+" "+t._s(t.tokenSymbol))])])],1)],1)},i=[],a=(n("b680"),n("cf45")),o=n("dee4"),s={mixins:[o["a"]],name:"RankIntro",props:{rank:Object,isRank:{type:Boolean,default:!0}},components:{},computed:{successPercent:function(){var t=this.rank.successCnt.toNumber()/this.rank.successCnt.add(this.rank.failedCnt).add(this.rank.arguingCnt).toNumber();return 100*t.toFixed(4)},successBalanceInUnit:function(){var t=this.rank.successBalance;return a["a"].weiToUnit(t,this.tokenDecimals)},failedBalanceInUnit:function(){var t=this.rank.failedBalance;return a["a"].weiToUnit(t,this.tokenDecimals)},arguingBalanceInUnit:function(){var t=this.rank.arguingBalance;return a["a"].weiToUnit(t,this.tokenDecimals)}},data:function(){return{}},created:function(){},methods:{}},c=s,l=(n("65db"),n("2877")),m=Object(l["a"])(c,r,i,!1,null,null,null);e["a"]=m.exports},"0c28":function(t,e,n){"use strict";n("ee7f")},1148:function(t,e,n){"use strict";var r=n("da84"),i=n("5926"),a=n("577e"),o=n("1d80"),s=r.RangeError;t.exports=function(t){var e=a(o(this)),n="",r=i(t);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},"3d59":function(t,e,n){"use strict";n("77a9")},"408a":function(t,e,n){var r=n("e330");t.exports=r(1..valueOf)},"4c17":function(t,e,n){"use strict";var r=n("4360");e["a"]={balanceOf:function(t){return r["a"].state.dtoken.contract.balanceOf(t)},tryBurn:function(t){return r["a"].state.dtoken.contract.tryBurn(t)},tryMint:function(t){return r["a"].state.dtoken.contract.tryMint(t)},burn:function(t){return r["a"].state.dtoken.contract.connect(r["a"].state.provider.getSigner()).burn(t)}}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("e330"),i=n("1d80"),a=n("577e"),o=n("5899"),s=r("".replace),c="["+o+"]",l=RegExp("^"+c+c+"*"),m=RegExp(c+c+"*$"),u=function(t){return function(e){var n=a(i(e));return 1&t&&(n=s(n,l,"")),2&t&&(n=s(n,m,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},6511:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",width:"100%"}},[n("order-new"),n("recent-order")],1)},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sec-card",{staticClass:"order-panel",staticStyle:{height:"100%","max-width":"560px"},attrs:{"show-background":!0}},[n("div",{staticClass:"sec-card-header",attrs:{slot:"header"},slot:"header"},[n("div",[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-jiaoyi"}})]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.$t("orderNew.header.title")))])]),n("el-popover",{attrs:{placement:"bottom-end","visible-arrow":!1,trigger:"click"},model:{value:t.showTradeSettingPopover,callback:function(e){t.showTradeSettingPopover=e},expression:"showTradeSettingPopover"}},[n("div",[n("div",{staticStyle:{"margin-top":"5px"}},[n("div",[n("span",{staticStyle:{"margin-left":"0!important"}},[t._v(t._s(t.$t("orderNew.form.expire")))]),n("el-tooltip",{staticStyle:{"margin-left":"3px"},attrs:{content:t.$t("orderNew.form.expireTip"),placement:"top"}},[n("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.expireTip)},slot:"content"}),n("i",{staticClass:"el-icon-question"})]),n("span",[t._v(":")])],1),n("div",[n("el-input-number",{staticStyle:{width:"90px"},attrs:{size:"small","controls-position":"right",min:2,placeholder:"3"},model:{value:t.tradeForm.expireTime,callback:function(e){t.$set(t.tradeForm,"expireTime",e)},expression:"tradeForm.expireTime"}}),n("el-select",{staticStyle:{width:"90px","background-color":"inherit","margin-left":"5px"},attrs:{size:"small"},model:{value:t.tradeForm.expireTimeUnit,callback:function(e){t.$set(t.tradeForm,"expireTimeUnit",e)},expression:"tradeForm.expireTimeUnit"}},[n("el-option",{attrs:{label:t.$t("common.hour"),value:"hour"}}),n("el-option",{attrs:{label:t.$t("common.day"),value:"day"}}),n("el-option",{attrs:{label:t.$t("common.week"),value:"week"}})],1),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.$t("orderNew.form.expireLabel")))])],1)]),t.hasInviter?t._e():n("div",{staticStyle:{"margin-top":"5px"}},[n("div",[n("span",[t._v(t._s(t.$t("orderNew.form.inviter")))]),n("span",[t._v(":")])]),n("div",[n("el-input",{attrs:{type:"textarea",rows:1,autosize:"",placeholder:t.$t("common.optional")},model:{value:t.tradeForm.inviter,callback:function(e){t.$set(t.tradeForm,"inviter",e)},expression:"tradeForm.inviter"}})],1)])]),n("i",{staticClass:"el-icon-setting trade-setting-icon",attrs:{slot:"reference"},slot:"reference"})])],1),n("div",[n("div",{staticClass:"sec_form_panel"},[n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(t._s(t.$t("orderNew.form.payee"))+":")])]),n("div",{staticClass:"sec_form_item_content"},[n("el-input",{staticStyle:{"min-width":"280px"},attrs:{type:"textarea",rows:1,autosize:"",placeholder:"0x"},on:{input:t.onPayeeChange},model:{value:t.tradeForm.payee,callback:function(e){t.$set(t.tradeForm,"payee",e)},expression:"tradeForm.payee"}}),null!==t.tradeForm.payeeInfo?n("div",[n("span",{staticClass:"tip-span",staticStyle:{"margin-right":"5px"}},[t._v(t._s(t.$t("rank.form.successBalance"))+": "+t._s(t.payeeSuccessBalanceInUnit)+" "+t._s(t.tokenSymbol))]),n("el-popover",{attrs:{placement:"bottom",width:t.isMobile?t.screenWidth-20:500,trigger:"click"}},[n("div",[t.tradeForm.payeeInfo.arguingCnt>0?n("div",{staticClass:"payee-risk-tip-panel"},[n("span",{staticStyle:{color:"rgb(80, 144, 234)"}},[n("b",[t._v(t._s(t.$t("common.tip"))+":")]),t._v(" "+t._s(t.$t("orderNew.form.payeeRishTip"))+" ")])]):t._e(),n("rank-intro",{staticStyle:{"margin-top":"5px"},attrs:{"is-rank":!1,rank:t.tradeForm.payeeInfo}})],1),n("i",{staticClass:"el-icon-question",style:t.tradeForm.payeeInfo.arguingCnt>0?"color: #fa4d56":"",attrs:{slot:"reference"},slot:"reference"})])],1):t._e()],1)]),n("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",padding:"20px 0 5px 0","line-height":"15px"}},[n("span",{staticClass:"tip-span"},[t._v(t._s(t.$t("orderNew.form.balance"))+": "+t._s(t.tokenBalanceInUnit)+" "+t._s(t.tokenSymbol))]),n("el-button",{staticStyle:{"margin-left":"5px",padding:"0"},attrs:{type:"text"},on:{click:t.goMax}},[t._v(t._s(t.$t("common.max")))])],1),n("div",{staticStyle:{"border-radius":"10px",border:"1px dashed #5d5d5d",padding:"10px","margin-bottom":"10px"}},[n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(t._s(t.$t("orderNew.form.amount"))+":")])]),n("div",{staticClass:"sec_form_item_content"},[n("amount-input",{attrs:{symbol:t.tokenSymbol,decimals:t.tokenDecimals},on:{change:t.onAmountChange},model:{value:t.tradeForm.amount,callback:function(e){t.$set(t.tradeForm,"amount",e)},expression:"tradeForm.amount"}}),n("span",{staticClass:"tip-span"},[t._v(t._s(t.$t("orderNew.form.actuallyArrived"))+" "+t._s(t.orderActuallyArrived)+" "+t._s(t.tokenSymbol))])],1)]),n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",{staticStyle:{"margin-left":"0!important"}},[t._v(t._s(t.$t("orderNew.form.margin")))]),n("el-tooltip",{staticStyle:{"margin-left":"3px"},attrs:{content:t.$t("orderNew.form.marginTip"),placement:"top"}},[n("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.marginTip)},slot:"content"}),n("i",{staticClass:"el-icon-question"})]),n("span",[t._v(":")])],1),n("div",{staticClass:"sec_form_item_content"},[n("span",{staticClass:"tip-span",staticStyle:{"margin-left":"0!important"}},[t._v(t._s(t.$t("orderNew.form.margin"))+" "+t._s(t.margin)+" "+t._s(t.tokenSymbol)+" ("+t._s(t.tradeForm.marginPercent)+"%)")]),n("el-popover",{staticStyle:{"margin-left":"5px"},attrs:{placement:"bottom","visible-arrow":!1,trigger:"click"},model:{value:t.showMarginSettingPopover,callback:function(e){t.showMarginSettingPopover=e},expression:"showMarginSettingPopover"}},[n("div",[n("div",[n("div",[n("span",{staticStyle:{"margin-left":"0!important"}},[t._v(t._s(t.$t("orderNew.form.margin")))]),n("el-tooltip",{staticStyle:{"margin-left":"3px"},attrs:{content:t.$t("orderNew.form.marginTip"),placement:"top"}},[n("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.marginTip)},slot:"content"}),n("i",{staticClass:"el-icon-question"})]),n("span",[t._v(":")]),n("span",[t._v(t._s(t.$t("orderNew.form.margin"))+" "+t._s(t.margin)+" "+t._s(t.tokenSymbol))])],1),n("div",[n("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},[n("el-radio-group",{staticStyle:{"margin-right":"5px"},attrs:{size:"mini"},on:{change:t.onMarginLevelChange},model:{value:t.tradeForm.marginLevel,callback:function(e){t.$set(t.tradeForm,"marginLevel",e)},expression:"tradeForm.marginLevel"}},t._l(t.marginPercentList,(function(e,r){return n("el-radio-button",{key:r,attrs:{label:e.label}},[t._v(t._s(t.$t("orderNew.form.marginRiskLevel."+e.label)))])})),1),n("amount-input",{staticClass:"margin-input",staticStyle:{width:"70px"},attrs:{"line-height":18,decimals:2,symbol:"%"},on:{change:t.onMarginPercentChange},model:{value:t.tradeForm.marginPercent,callback:function(e){t.$set(t.tradeForm,"marginPercent",e)},expression:"tradeForm.marginPercent"}})],1)])])]),n("el-button",{staticStyle:{padding:"0"},attrs:{slot:"reference",type:"text"},on:{click:t.goMarginCustomize},slot:"reference"},[t._v(t._s(t.$t("common.customize")))])],1)],1)])])]),n("div",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"}},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("span",{staticClass:"tip-span"},[t._v(t._s(t.$t("orderNew.form.expectedDToken"))+": "+t._s(t.expectedDTokenInUnit)+" "+t._s(t.dtokenSymbol))]),n("el-tooltip",{staticStyle:{"margin-left":"5px"},attrs:{content:t.$t("orderNew.form.expectedDTokenTip"),placement:"top"}},[n("i",{staticClass:"el-icon-question"})])],1),n("tx-commit-button",{staticStyle:{"margin-top":"5px"},attrs:{"tx-loading":t.txLoading,"tx-form-check":t.txFormCheck}})],1)]),n("el-dialog",{attrs:{visible:t.txConfirmDialogVisible,"custom-class":"wallet-dialog",title:t.$t("common.txConfirmDialogTitle"),width:"90%"},on:{"update:visible":function(e){t.txConfirmDialogVisible=e},close:t.onTxConfirmDialogClose}},[n("tx-confirm",{ref:"txConfirm",attrs:{"tx-form":t.txForm,"add-token":t.addToken,"call-func":t.txConfirmCall},model:{value:t.hash,callback:function(e){t.hash=e},expression:"hash"}},[n("div",{staticStyle:{width:"100%"},attrs:{slot:"content"},slot:"content"},[t.needApprove?n("div",{staticStyle:{width:"100%","text-align":"center"}},[t._v(" "+t._s(t.$t("common.approve"))+" "+t._s(t.tokenSymbol)+" ")]):n("div",{staticClass:"sec_form_panel"},[n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(" "+t._s(t.$t("orderNew.form.payee"))+": ")])]),n("div",{staticClass:"sec_form_item_content"},[t._v(" "+t._s(t.tradeForm.payee)+" ")])]),n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(" "+t._s(t.$t("orderNew.form.amount"))+": ")])]),n("div",{staticClass:"sec_form_item_content"},[t._v(" "+t._s(t.tradeForm.amount)+" "+t._s(t.tokenSymbol)+" ")])]),n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(" "+t._s(t.$t("orderNew.form.fee"))+": ")])]),n("div",{staticClass:"sec_form_item_content"},[t._v(" "+t._s(t.orderFeeInUnit)+" "+t._s(t.tokenSymbol)+" ")])]),n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(" "+t._s(t.$t("orderNew.form.actuallyArrived"))+": ")])]),n("div",{staticClass:"sec_form_item_content"},[t._v(" "+t._s(t.orderActuallyArrived)+" "+t._s(t.tokenSymbol)+" ")])]),n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(" "+t._s(t.$t("orderNew.form.margin"))+": ")])]),n("div",{staticClass:"sec_form_item_content"},[t._v(" "+t._s(t.margin)+" "+t._s(t.tokenSymbol)+" ")])]),n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(" "+t._s(t.$t("orderNew.form.expectedDToken"))+": ")])]),n("div",{staticClass:"sec_form_item_content"},[t._v(" "+t._s(t.expectedDTokenInUnit)+" "+t._s(t.dtokenSymbol)+" ")])]),n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(" "+t._s(t.$t("orderNew.form.expire"))+": ")])]),n("div",{staticClass:"sec_form_item_content"},[t._v(" "+t._s(t.tradeForm.expireTime)+" "+t._s(t.$t("common."+t.tradeForm.expireTimeUnit))+" "),n("span",[t._v(t._s(t.$t("orderNew.form.expireLabel")))])])]),t.hasInviter||""===t.tradeForm.inviter?t._e():n("div",{staticClass:"sec_form_item"},[n("div",{staticClass:"sec_form_item_title"},[n("span",[t._v(" "+t._s(t.$t("orderNew.form.inviter"))+": ")])]),n("div",{staticClass:"sec_form_item_content"},[t._v(" "+t._s(t.txForm.inviter)+" ")])])])]),n("span",{staticStyle:{"font-size":"20px"},attrs:{slot:"info"},slot:"info"},[t._v(" "+t._s(t.needApprove?t.$t("common.approve")+t.tokenSymbol:t.formatTradeInfo)+" ")])])],1)],1)},o=[],s=n("1da1"),c=(n("96cf"),n("d3b7"),n("25f0"),n("99af"),n("b680"),n("f5e2")),l=n("bc43"),m=n("04ad"),u=n("cf45"),d=n("c448"),p=n("b9d1"),f=n("2610"),g=n("f450"),h=n("4c17"),v=n("b4d8"),_=n("dee4"),x=n("e31c"),y=n("cab9"),b=n("34f5"),k={mixins:[_["a"],y["a"]],name:"OrderNew",props:{},components:{SecCard:p["a"],TxConfirm:d["a"],RankIntro:m["a"],TxCommitButton:c["default"],AmountInput:l["a"]},computed:{payeeSuccessBalanceInUnit:function(){if(null===this.tradeForm.payeeInfo)return 0;var t=this.tradeForm.payeeInfo.successBalance;return u["a"].weiToUnit(t,this.tokenDecimals)},amountInWei:function(){var t=u["a"].unitToWei(this.tradeForm.amount.toString());return t},marginInWei:function(){return this.getMarginFromPercent()},margin:function(){return this.amountInWei.lte(u["a"].toBigNumber(0))?0:u["a"].weiToUnit(this.marginInWei)},expireTip:function(){return this.$t("orderNew.form.expireTip")},marginTip:function(){return this.$t("orderNew.form.marginTip")},hasInviter:function(){return this.factoryInviter!==u["a"].getEmptyAddress()},marginBalanceInUnit:function(){var t=this.tradeInfo.marginBalance;return u["a"].weiToUnit(t)},payeeMinAmountInUnit:function(){var t=this.tradeForm.payeeMinAmount;return u["a"].weiToUnit(t)},expectedDTokenInUnit:function(){var t=this.tradeForm.expectedDToken;return""===t?0:u["a"].weiToUnitWithDecimals(t,this.dtokenDecimals)},needApprove:function(){return null!==this.tokenAllowance&&(!(""===this.tradeForm.amount||!this.tradeForm.amount)&&!!this.tokenAllowance.lt(u["a"].unitToWei(this.tradeForm.amount.toString())))},formatTradeInfo:function(){return"".concat(this.$t("orderNew.header.title")," ").concat(this.tradeForm.amount," ").concat(this.tokenSymbol)},tradeAmountInWei:function(){return this.amountInWei.add(this.marginInWei)},orderFee:function(){if(null===this.$store.state.factory.config)return 0;if(""===this.tradeForm.amount)return 0;var t=u["a"].unitToWei(this.tradeForm.amount).mul(this.$store.state.factory.config.fee).div(u["a"].toBigNumber(1e3));return t},orderFeeInUnit:function(){return u["a"].weiToUnit(this.orderFee)},orderActuallyArrived:function(){return 0===this.tradeForm.amount||""===this.tradeForm.amount?0:(this.tradeForm.amount-this.orderFeeInUnit).toFixed(this.tokenDecimals)},showInviter:function(){return!this.hasInviter&&(null!==this.tradeForm.inviter&&""!==this.tradeForm.inviter&&this.tradeForm.inviter!==u["a"].getEmptyAddress())}},data:function(){return{init:!1,marginPercentList:[{min:0,max:20,value:10,label:"week"},{min:20,max:40,value:25,label:"medium"},{min:40,max:70,value:50,label:"high"},{min:70,max:100,value:75,label:"veryHigh"}],showTradeSettingPopover:!1,showMarginSettingPopover:!1,tradeForm:{payeeInfo:null,payee:"",payeeMinAmount:0,amount:"",marginLevel:"medium",showMarginPercent:!1,marginPercent:25,expectedDToken:"",expireTime:3,expireTimeUnit:"hour",inviter:""},txConfirmDialogVisible:!1}},watch:{},created:function(){var t=this;this.eventHandlers[v["a"].tokenChanged]=function(){t.initData()},this.eventHandlers[v["a"].txSent]=function(e){t.hash===e&&t.txForm.type===u["a"].getTxTypes().create&&(t.tradeForm.payee="",t.tradeForm.payeeInfo=null,t.tradeForm.amount="",t.tradeForm.expectedDToken="",t.tradeForm.inviter="")},this.eventHandlers[v["a"].txConfirmed]=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.type!==u["a"].getTxTypes().approve&&n.type!==u["a"].getTxTypes().create&&n.type!==u["a"].getTxTypes().delivered&&n.type!==u["a"].getTxTypes().frozeOrder&&n.type!==u["a"].getTxTypes().confirmReceived&&n.type!==u["a"].getTxTypes().withdrawTimeoutOrder){e.next=9;break}return e.next=3,f["a"].syncTokenBalance();case 3:return e.next=5,b["a"].getInviter(t.account);case 5:return r=e.sent,e.next=8,t.$store.commit("setFactoryInviter",r);case 8:t.hash===n.hash&&(t.txPending=!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},methods:{baseInit:function(){this.initData()},initData:function(){var t=this.$store.state.tradeInfo.setting;null!==t&&(this.tradeForm.expireTime=t.et,this.tradeForm.expireTimeUnit=t.eu,this.tradeForm.marginPercent=t.mp,this.onMarginPercentChange()),this.hasInviter||(this.tradeForm.inviter=this.$store.state.tradeInfo.inviter),this.onPayeeChange(this.tradeForm.payee),this.onAmountChange(this.tradeForm.amount),this.init=!0},goMarginCustomize:function(){this.showTradeSettingPopover=!0},onTxConfirmDialogClose:function(){this.txForm.type===u["a"].getTxTypes().create&&""!==this.hash&&window.scrollTo({top:590,left:0,behavior:"smooth"})},txFormCheck:function(){var t={success:!1};return""===this.tradeForm.payee?(t.msg=this.$t("orderNew.btn.inputPayeeAddress"),t):null===u["a"].getAddress(this.tradeForm.payee)?(t.msg=this.$t("orderNew.btn.payeeAddressError"),t):this.amountInWei<=0?(t.msg=this.$t("orderNew.btn.inputAmount"),t):this.tradeAmountInWei.gt(this.tokenBalance)?(t.msg=this.$t("common.balanceNotEnough"),t):this.amountInWei.lt(this.tradeForm.payeeMinAmount)?(t.msg=this.$t("orderNew.btn.lessThanPayeeMinAmount"),t):""!==this.tradeForm.inviter&&null===u["a"].getAddress(this.tradeForm.inviter)?(t.msg=this.$t("orderNew.btn.inviterAddressError"),t):this.needApprove?(t.success=!0,t.msg=this.$t("common.approve"),t.func=this.goSell,t):(t.success=!0,t.msg=this.$t("orderNew.btn.buy"),t.func=this.goSell,t)},goMax:function(){this.tradeForm.amount=this.getMaxAmount(),this.onAmountChange(this.tradeForm.amount)},getMaxAmount:function(){var t=this.tokenBalance.mul(u["a"].toBigNumber(100)).div(u["a"].toBigNumber(100).add(u["a"].toBigNumber(this.tradeForm.marginPercent)));return u["a"].weiToUnit(t)},onAmountChange:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""!==t){n.next=2;break}return n.abrupt("return");case 2:if(e.txLoading||null===e.$store.state.dtoken){n.next=7;break}return n.next=5,h["a"].tryMint(e.orderFee);case 5:r=n.sent,e.tradeForm.expectedDToken=r;case 7:case"end":return n.stop()}}),n)})))()},getMarginFromPercent:function(){var t=0;if(""!==this.tradeForm.marginPercent&&(t=this.tradeForm.marginPercent),0===t)return u["a"].toBigNumber(0);var e=this.amountInWei.mul(u["a"].toBigNumber(t)).div(u["a"].toBigNumber(100));return e},onMarginLevelChange:function(t){for(var e=0;e<this.marginPercentList.length;e++)t===this.marginPercentList[e].label&&(this.tradeForm.marginPercent=this.marginPercentList[e].value,this.tradeAmountInWei.gt(this.tokenBalance)&&this.$message.info(this.$t("common.balanceNotEnough")))},onMarginPercentChange:function(){this.tradeForm.marginLevel=this.getMarginLevelFromPercent(),this.tradeAmountInWei.gt(this.tokenBalance)&&this.$message.info(this.$t("common.balanceNotEnough"))},getMarginLevelFromPercent:function(){for(var t=0;t<this.marginPercentList.length;t++)if(this.tradeForm.marginPercent>=this.marginPercentList[t].min&&this.tradeForm.marginPercent<this.marginPercentList[t].max)return this.marginPercentList[t].label;return this.marginPercentList[this.marginPercentList.length-1].label},onPayeeChange:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.tradeForm.payeeInfo=null,r=u["a"].getAddress(t),null===r||null===e.poolItem){n.next=12;break}return n.next=5,g["a"].payeeLimits(r);case 5:return i=n.sent,e.tradeForm.payeeMinAmount=i,e.amountInWei.lt(e.tradeForm.payeeMinAmount)&&(e.tradeForm.amount=e.payeeMinAmountInUnit),n.next=10,g["a"].payeeInfos(r);case 10:a=n.sent,e.tradeForm.payeeInfo={account:a.account,title:u["a"].hexToString(a.title),content:u["a"].hexToString(a.content),successCnt:a.sucCnt,successBalance:a.sucBal,failedCnt:a.failCnt,failedBalance:a.failBal,arguingCnt:a.argCnt,arguingBalance:a.argBal};case 12:case"end":return n.stop()}}),n)})))()},getWindowHour:function(){switch(this.tradeForm.expireTimeUnit){case"hour":return this.tradeForm.expireTime;case"day":return 24*this.tradeForm.expireTime;case"week":return 24*this.tradeForm.expireTime*7}return 3},goSell:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=u["a"].getAddress(t.tradeForm.payee),null!==n){e.next=4;break}return t.$message.warning(t.$t("orderNew.btn.payeeAddressError")),e.abrupt("return");case 4:if(!(t.tradeForm.amount<t.payeeMinAmountInUnit)){e.next=7;break}return t.$message.warning("小于买家的最小金额"),e.abrupt("return");case 7:if(r=t.tradeForm.inviter,!t.hasInviter){e.next=12;break}r=u["a"].getEmptyAddress(),e.next=20;break;case 12:if(""!==r){e.next=16;break}r=t.account,e.next=20;break;case 16:if(r=u["a"].getAddress(t.tradeForm.inviter),null!==r){e.next=20;break}return t.$message.warning(t.$t("orderNew.btn.payeeAddressError")),e.abrupt("return");case 20:if(!t.tradeAmountInWei.gt(t.tokenBalance)){e.next=23;break}return t.$message.warning(t.$t("common.balanceNotEnough")),e.abrupt("return");case 23:if(t.$refs["txConfirm"]&&t.$refs["txConfirm"].init(),t.hash="",t.addToken=null,!t.needApprove){e.next=31;break}t.txForm={type:u["a"].getTxTypes().approve,token:t.tokenItem.address,to:t.tokenItem.address,sender:t.account},t.txConfirmCall=function(){return f["a"].approve(t.poolItem.address,-1)},e.next=39;break;case 31:return i=u["a"].getNetVersionBlockInterval(),0===i&&(i=13),a=Math.floor(3600*t.getWindowHour()/i),t.txForm={type:u["a"].getTxTypes().create,to:t.poolItem.address,payer:t.account,payee:n,amount:u["a"].unitToWei(t.tradeForm.amount,t.tokenItem.decimals),margin:t.marginInWei,windowHour:t.getWindowHour(),windowHeight:a,inviter:r,fee:t.orderFee,dToken:t.tradeForm.expectedDToken},t.txConfirmCall=function(){return g["a"].create(n,t.amountInWei,t.marginInWei,t.getWindowHour(),a,r)},t.addToken={address:t.dtokenAddress,symbol:t.dtokenSymbol,decimals:t.dtokenDecimals},e.next=39,x["a"].updateSetting({mp:t.tradeForm.marginPercent,et:t.tradeForm.expireTime,eu:t.tradeForm.expireTimeUnit});case 39:t.txConfirmDialogVisible=!0;case 40:case"end":return e.stop()}}),e)})))()}}},w=k,C=(n("0c28"),n("2877")),F=Object(C["a"])(w,a,o,!1,null,null,null),T=F.exports,I=n("bcc7"),S={mixins:[_["a"]],name:"Home",props:{},components:{RecentOrder:I["default"],OrderNew:T},data:function(){return{}}},$=S,N=Object(C["a"])($,r,i,!1,null,null,null);e["default"]=N.exports},"65db":function(t,e,n){"use strict";n("c80a")},7156:function(t,e,n){var r=n("1626"),i=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var o,s;return a&&r(o=e.constructor)&&o!==n&&i(s=o.prototype)&&s!==n.prototype&&a(t,s),t}},"77a9":function(t,e,n){},a9e3:function(t,e,n){"use strict";var r=n("83ab"),i=n("da84"),a=n("e330"),o=n("94ca"),s=n("6eeb"),c=n("1a2d"),l=n("7156"),m=n("3a9b"),u=n("d9b5"),d=n("c04e"),p=n("d039"),f=n("241c").f,g=n("06cf").f,h=n("9bf2").f,v=n("408a"),_=n("58a8").trim,x="Number",y=i[x],b=y.prototype,k=i.TypeError,w=a("".slice),C=a("".charCodeAt),F=function(t){var e=d(t,"number");return"bigint"==typeof e?e:T(e)},T=function(t){var e,n,r,i,a,o,s,c,l=d(t,"number");if(u(l))throw k("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=_(l),e=C(l,0),43===e||45===e){if(n=C(l,2),88===n||120===n)return NaN}else if(48===e){switch(C(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(a=w(l,2),o=a.length,s=0;s<o;s++)if(c=C(a,s),c<48||c>i)return NaN;return parseInt(a,r)}return+l};if(o(x,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var I,S=function(t){var e=arguments.length<1?0:y(F(t)),n=this;return m(b,n)&&p((function(){v(n)}))?l(Object(e),n,S):e},$=r?f(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),N=0;$.length>N;N++)c(y,I=$[N])&&!c(S,I)&&h(S,I,g(y,I));S.prototype=b,b.constructor=S,s(i,x,S)}},b680:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("e330"),o=n("5926"),s=n("408a"),c=n("1148"),l=n("d039"),m=i.RangeError,u=i.String,d=Math.floor,p=a(c),f=a("".slice),g=a(1..toFixed),h=function(t,e,n){return 0===e?n:e%2===1?h(t,e-1,n*t):h(t*t,e/2,n)},v=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},_=function(t,e,n){var r=-1,i=n;while(++r<6)i+=e*t[r],t[r]=i%1e7,i=d(i/1e7)},x=function(t,e){var n=6,r=0;while(--n>=0)r+=t[n],t[n]=d(r/e),r=r%e*1e7},y=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var r=u(t[e]);n=""===n?r:n+p("0",7-r.length)+r}return n},b=l((function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)}))||!l((function(){g({})}));r({target:"Number",proto:!0,forced:b},{toFixed:function(t){var e,n,r,i,a=s(this),c=o(t),l=[0,0,0,0,0,0],d="",g="0";if(c<0||c>20)throw m("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return u(a);if(a<0&&(d="-",a=-a),a>1e-21)if(e=v(a*h(2,69,1))-69,n=e<0?a*h(2,-e,1):a/h(2,e,1),n*=4503599627370496,e=52-e,e>0){_(l,0,n),r=c;while(r>=7)_(l,1e7,0),r-=7;_(l,h(10,r,1),0),r=e-1;while(r>=23)x(l,1<<23),r-=23;x(l,1<<r),_(l,1,1),x(l,2),g=y(l)}else _(l,0,n),_(l,1<<-e,0),g=y(l)+p("0",c);return c>0?(i=g.length,g=d+(i<=c?"0."+p("0",c-i)+g:f(g,0,i-c)+"."+f(g,i-c))):g=d+g,g}})},bc43:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"sec_amount_input",style:t.style,attrs:{type:"text",placeholder:0===t.decimals?"0":"0.0",controls:"false"},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},t.onInput],focus:t.onFocus}}),t.symbol?n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.symbol))]):t._e()])},i=[],a=(n("a9e3"),n("d3b7"),n("25f0"),n("dee4")),o=n("cf45"),s={mixins:[a["a"]],name:"AmountInput",model:{prop:"value",event:"change"},props:{value:{type:[Number,String]},symbol:String,decimals:{type:Number,default:79},lineHeight:{type:Number,default:30}},data:function(){return{amount:"",lastAmount:""}},computed:{style:function(){return{"line-height":this.lineHeight+"px","min-width":"%"===this.symbol?"0":"220px","text-align":"%"===this.symbol?"center":"left"}}},created:function(){this.amount=this.value,this.lastAmount=this.value},watch:{value:function(t){this.amount=t,this.lastAmount=t}},methods:{onFocus:function(){},onInput:function(t){var e=t.target.value;""===e||this.checkValue(e)?this.lastAmount=e:this.amount=this.lastAmount,this.$emit("change",this.amount)},checkValue:function(t){if(0===this.decimals)return"string"===typeof t?parseInt(t,10).toString()===t:parseInt(t,10)===t;try{return o["a"].unitToWeiWithDecimals(t,this.decimals),!0}catch(e){return!1}}}},c=s,l=n("2877"),m=Object(l["a"])(c,r,i,!1,null,null,null);e["a"]=m.exports},c80a:function(t,e,n){},ee7f:function(t,e,n){},f5e2:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{staticClass:"submit-btn",attrs:{loading:t.txLoading,type:t.sellBtnType,size:t.isMobile?"mini":"large",disabled:"primary"!==t.sellBtnType,round:""},on:{click:t.onCommit}},[t._v(t._s(t.sellBtnTitle))]),n("el-dialog",{attrs:{visible:t.installWalletDialogVisible,"custom-class":"wallet-dialog","append-to-body":"",width:"90%"},on:{"update:visible":function(e){t.installWalletDialogVisible=e}}},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[n("div",{staticClass:"wallet-tip",domProps:{innerHTML:t._s(t.$t("common.installWalletTip"))}}),n("el-button",{attrs:{size:t.isMobile?"mini":"large",type:"primary"},on:{click:t.goInstallWallet}},[t._v(t._s(t.$t("common.installWallet")))])],1)])],1)},i=[],a=n("1da1"),o=(n("96cf"),n("dee4")),s=n("cf45"),c={mixins:[o["a"]],name:"TxCommitButton",props:{isAccount:{type:Boolean,default:!1},txLoading:Boolean,txFormCheck:Function,size:{type:String,default:"small"}},data:function(){return{installWalletDialogVisible:!1}},computed:{sellBtnType:function(){return""===this.account?"primary":this.isAccount||null!==this.poolItem?this.txFormCheck&&!this.txFormCheck().success?"info":"primary":"info"},sellBtnTitle:function(){if(""===this.account)return this.$t("header.connectWallet");if(this.txLoading)return this.$t("common.loading");if(!this.isAccount&&null===this.poolItem)return this.$t("common.noPool");if(this.txFormCheck){var t=this.txFormCheck();return void 0===t.msg||null===t.msg||""===t.msg?this.$t("common.submit"):t.msg}return this.$t("common.submit")}},watch:{},methods:{onCommit:function(){if(""===this.account)return this.onConnectWallet();if((this.isAccount||null!==this.poolItem)&&this.txFormCheck){var t=this.txFormCheck();t.success&&t.func&&t.func()}},onConnectWallet:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getAccount(t.$message,(function(){t.installWalletDialogVisible=!0}));case 2:case"end":return e.stop()}}),e)})))()}}},l=c,m=(n("3d59"),n("2877")),u=Object(m["a"])(l,r,i,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-3fc35c38.cd09a343.js.map