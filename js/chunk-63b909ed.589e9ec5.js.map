{"version":3,"sources":["webpack:///./src/components/network.vue?d7b6","webpack:///src/components/network.vue","webpack:///./src/components/network.vue?4fbe","webpack:///./src/components/network.vue?1ded","webpack:///./src/components/network.vue?2e85"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","on","showNetworkList","attrs","networkVersionIcon","isMobile","_e","_v","_s","networkVersionName","_l","item","key","id","$event","switchNetwork","icon","name","installWalletDialogVisible","staticStyle","domProps","$t","goInstallWallet","staticRenderFns","mixins","base","data","networkListDialogVisible","computed","networkVersionList","common","networkVersion","$store","state","netVersion","created","methods","getNetworkInfo","list","i","component"],"mappings":"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","file":"js/chunk-63b909ed.589e9ec5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"network-btn\",staticClass:\"network-panel\",on:{\"click\":_vm.showNetworkList}},[_c('img',{staticClass:\"network-icon\",attrs:{\"src\":_vm.networkVersionIcon}}),(!_vm.isMobile)?_c('div',[_vm._v(\" \"+_vm._s(_vm.networkVersionName)+\" \")]):_vm._e(),_c('svg',{staticClass:\"sc-w04zhs-13 gBIZBN\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('polyline',{attrs:{\"points\":\"6 9 12 15 18 9\"}})])]),(_vm.networkListDialogVisible)?_c('div',{ref:\"network-list\",staticClass:\"network-list-panel\"},_vm._l((_vm.networkVersionList),function(item){return _c('div',{key:item.id,staticClass:\"network-item\",on:{\"click\":function($event){return _vm.switchNetwork(item.id)}}},[_c('img',{staticClass:\"network-icon\",attrs:{\"src\":item.icon}}),_c('div',{staticClass:\"network-name\"},[_vm._v(_vm._s(item.name))])])}),0):_vm._e(),_c('el-dialog',{attrs:{\"visible\":_vm.installWalletDialogVisible,\"custom-class\":\"wallet-dialog\",\"append-to-body\":\"\",\"width\":\"90%\"},on:{\"update:visible\":function($event){_vm.installWalletDialogVisible=$event}}},[_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"center\",\"flex-direction\":\"column\"}},[_c('div',{staticClass:\"wallet-tip\",domProps:{\"innerHTML\":_vm._s(_vm.$t('common.installWalletTip'))}}),_c('el-button',{attrs:{\"size\":_vm.isMobile ? 'mini' : 'large',\"type\":\"primary\"},on:{\"click\":_vm.goInstallWallet}},[_vm._v(_vm._s(_vm.$t('common.installWallet')))])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div ref=\"network-btn\" class=\"network-panel\" @click=\"showNetworkList\">\n      <img :src=\"networkVersionIcon\" class=\"network-icon\">\n      <div v-if=\"!isMobile\">\n        {{networkVersionName}}\n      </div>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"sc-w04zhs-13 gBIZBN\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>\n    </div>\n    <div v-if=\"networkListDialogVisible\" ref=\"network-list\" class=\"network-list-panel\">\n      <div class=\"network-item\" v-for=\"item in networkVersionList\" :key=\"item.id\" @click=\"switchNetwork(item.id)\">\n        <img :src=\"item.icon\" class=\"network-icon\">\n        <div class=\"network-name\">{{item.name}}</div>\n      </div>\n    </div>\n\n    <el-dialog\n        :visible.sync=\"installWalletDialogVisible\"\n        custom-class=\"wallet-dialog\"\n        append-to-body\n        width=\"90%\">\n      <div style=\"display: flex; align-items: center; justify-content: center; flex-direction: column;\">\n        <div class=\"wallet-tip\" v-html=\"$t('common.installWalletTip')\">\n        </div>\n        <el-button :size=\"isMobile ? 'mini' : 'large'\" type=\"primary\" @click=\"goInstallWallet\">{{$t('common.installWallet')}}</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport tp from 'tp-js-sdk';\nimport base from \"@/utils/base\"\nimport common from \"@/utils/common\";\nimport metamask from \"@/utils/metamask\";\nimport {on} from \"element-ui/src/utils/dom\";\nexport default {\n  name: 'Network',\n  mixins: [base],\n  data() {\n    return {\n      installWalletDialogVisible: false,\n      networkListDialogVisible: false,\n    }\n  },\n  computed: {\n    networkVersionList() {\n      return common.getNetVersionList()\n    },\n    networkVersion() {\n      return this.$store.state.netVersion\n    },\n    networkVersionName() {\n      return common.getNetVersionName(this.$store.state.netVersion)\n    },\n    networkVersionIcon() {\n      return common.getNetVersionIcon(this.$store.state.netVersion)\n    },\n  },\n  created() {\n    on(document, 'click', e => {\n      if (this.$refs['network-btn']) {\n        if (this.$refs['network-btn'].contains(e.target)) {\n          return\n        }\n      }\n\n      if (this.$refs['network-list']) {\n        if (!this.$refs['network-list'].contains(e.target)) {\n          this.networkListDialogVisible = false\n          return\n        }\n      }\n    });\n  },\n  methods: {\n    showNetworkList(){\n      this.networkListDialogVisible = !this.networkListDialogVisible\n    },\n    getNetworkInfo(networkVersion) {\n      const list = this.networkVersionList\n      for (let i = 0; i < list.length; i++) {\n        if (networkVersion === list[i].id) {\n          return list[i]\n        }\n      }\n      return null\n    },\n    async switchNetwork(networkVersion) {\n\n      this.networkListDialogVisible = false\n\n      if (tp.isConnected()) {\n\n        let walletType = ''\n        switch (networkVersion) {\n          case '1':\n            walletType = 'eth'\n            break\n          case '128':\n            walletType = 'heco'\n            break\n          case '137':\n            walletType = 'matic'\n            break\n          case '56':\n            walletType = 'bsc'\n            break\n          case '3':\n            walletType = '-1'\n            break\n        }\n\n        tp.getWallet({\n          walletTypes: [walletType],\n          switch: true\n        })\n\n        // window.location.href = location.href + '&time='+((new Date()).getTime())\n        return\n      }\n\n      if (typeof window.ethereum !== 'undefined') {\n\n        const chainId = common.chainIdToHex(networkVersion)\n\n        metamask.switchEthereumChain(chainId).then(res => {\n          if (JSON.stringify(res).indexOf('wallet_switchEthereumChain does not exist/is not available') !== -1) {\n            this.$message.info(this.$t('common.switchFailTip'))\n          }\n          // window.location.href = location.href + '&time='+((new Date()).getTime())\n        }).catch(e => {\n          if (e.code === 4001) {\n            return\n          }\n          const net = this.getNetworkInfo(networkVersion)\n          if (null === net) {\n            return\n          }\n          metamask.addEthereumChain(\n              chainId, net.name, net.currency.name, net.currency.symbol, net.currency.decimals,\n              net.rpcs, [net.explorer], [])\n        })\n      } else {\n        this.installWalletDialogVisible = true\n      }\n    },\n  }\n}\n</script>\n<style>\n.network-panel {\n  -webkit-box-align: center;\n  align-items: center;\n  background-color: #909399;\n  border: 2px solid #909399;\n  border-radius: 12px;\n  color: rgb(255, 255, 255);\n  cursor: pointer;\n  display: flex;\n  font-weight: 500;\n  -webkit-box-pack: justify;\n  justify-content: space-between;\n  padding: 3px 8px;\n}\n.network-icon {\n  width: 24px;\n  height: 24px;\n  margin-right: 3px;\n  border-radius: 5px;\n}\n.network-list-panel {\n  align-items: flex-start;\n  background-color: rgb(33, 36, 41);\n  box-shadow: rgba(0, 0, 0, 0.01) 0px 0px 1px, rgba(0, 0, 0, 0.04) 0px 4px 8px, rgba(0, 0, 0, 0.04) 0px 16px 24px, rgba(0, 0, 0, 0.01) 0px 24px 32px;\n  border-radius: 20px;\n  display: flex;\n  flex-direction: column;\n  font-size: 16px;\n  overflow: auto;\n  padding: 16px;\n  position: absolute;\n  top: 55px;\n  width: 272px;\n  z-index: 99;\n}\n.network-list-panel > :not(:last-child) {\n  margin-bottom: 12px;\n}\n.network-item {\n  -webkit-box-align: center;\n  align-items: center;\n  background-color: transparent;\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  font-weight: 500;\n  -webkit-box-pack: justify;\n  justify-content: space-between;\n  padding: 6px 8px;\n  text-align: left;\n  width: 100%;\n}\n.network-name {\n  flex: 1 1 auto;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./network.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./network.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./network.vue?vue&type=template&id=86a088bc&\"\nimport script from \"./network.vue?vue&type=script&lang=js&\"\nexport * from \"./network.vue?vue&type=script&lang=js&\"\nimport style0 from \"./network.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./network.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}